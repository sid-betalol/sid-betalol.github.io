<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Automated PII De-Identification for Document Datasets | Siddharth Betala </title> <meta name="author" content="Siddharth Betala"> <meta name="description" content="Large-scale pipeline for detecting and removing sensitive personal information from 400,000+ documents with synthetic data replacement"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/favicon.ico?b01ad096ee8400fb20ddb339c8ee2334"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://sid-betalol.github.io/projects/9_project/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Siddharth</span> Betala </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/news/">news </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/personal/">personal </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Automated PII De-Identification for Document Datasets</h1> <p class="post-description">Large-scale pipeline for detecting and removing sensitive personal information from 400,000+ documents with synthetic data replacement</p> </header> <article> <blockquote> <p><strong>Collaboration</strong>: Stefan Larson, Vanderbilt University | 2023 - 2024<br> <strong>Published</strong>: EMNLP 2024 (Main Conference)<br> <strong>Scale</strong>: 400,000+ documents across 5 datasets</p> </blockquote> <h2 id="overview">Overview</h2> <p>Developed a comprehensive automated pipeline for detecting and de-identifying sensitive Personally Identifiable Information (PII) in large-scale document image datasets derived from IIT-CDIP. The system combines OCR, regex pattern matching, Named Entity Recognition, and computer vision techniques to process over 400,000 documents while preserving dataset utility through intelligent pseudonymization.</p> <h2 id="problem-statement">Problem Statement</h2> <p>Public document understanding datasets like RVL-CDIP, DocVQA, FUNSD, and Tobacco3482/800 contain alarming amounts of sensitive PII including:</p> <ul> <li> <strong>2,428 US Social Security Numbers</strong> across all datasets</li> <li> <strong>13,101 birth dates</strong> and <strong>6,284 birth places</strong> </li> <li> <strong>4,192 home addresses</strong> and <strong>1,948 home phone numbers</strong> </li> <li>Citizenship, marital status, religious affiliation, and health information</li> </ul> <p>The presence of such data violates contemporary research ethics guidelines and exposes individuals to identity theft risks, necessitating immediate action.</p> <h2 id="system-architecture">System Architecture</h2> <h3 id="1-large-scale-ocr-processing">1. Large-Scale OCR Processing</h3> <p><strong>Amazon Textract Deployment</strong>:</p> <ul> <li>Processed <strong>417,738 document images</strong> across 5 datasets (RVL-CDIP, DocVQA, FUNSD, Tobacco3482, Tobacco800)</li> <li>Extracted text with precise <strong>bounding box coordinates</strong> for spatial localization</li> <li>Achieved robust performance on diverse document types: resumes, forms, invoices, letters</li> </ul> <p><strong>Infrastructure</strong>:</p> <ul> <li>Batch processing pipeline for efficient large-scale operations</li> <li>Error handling for degraded or low-quality scanned documents</li> <li>Preservation of layout information for downstream processing</li> </ul> <h3 id="2-multi-modal-pii-detection-pipeline">2. Multi-Modal PII Detection Pipeline</h3> <p><strong>Stage 1 - Regex Pattern Matching</strong>:</p> <ul> <li>Detected structured PII with high precision: <ul> <li> <strong>SSNs</strong>: XXX-XX-XXXX format variations</li> <li> <strong>Phone numbers</strong>: Multiple format patterns</li> <li> <strong>Dates</strong>: MM/DD/YYYY and variations</li> <li> <strong>Email addresses</strong> and structured identifiers</li> </ul> </li> <li> <strong>97% document-level recall</strong> on SSN detection (Presidio analyzer)</li> </ul> <p><strong>Stage 2 - Named Entity Recognition</strong>:</p> <ul> <li>Integrated <strong>spaCy and Transformer-based NER</strong> models</li> <li>Detected unstructured PII: <ul> <li>Person names, locations, organizations</li> <li>Citizenship and nationality references</li> <li>Religious affiliations and demographic attributes</li> </ul> </li> <li>Enhanced with <strong>keyword-based contextual searches</strong> </li> </ul> <p><strong>Stage 3 - Manual Verification</strong>:</p> <ul> <li>Team of 9 annotators with expert oversight</li> <li> <strong>Fleiss’ Kappa: 0.918</strong> inter-annotator agreement</li> <li>Document-by-document inspection for smaller datasets</li> <li>Strategic sampling for RVL-CDIP’s 400K documents</li> </ul> <h3 id="3-de-identification-strategies">3. De-Identification Strategies</h3> <p><strong>Approach 1 - Basic Redaction</strong>:</p> <ul> <li>Black/white pixel overlays on sensitive regions</li> <li>Simple but <strong>reduces document utility</strong> (8-12% classifier accuracy drop)</li> </ul> <p><strong>Approach 2 - Pseudonymization with Synthetic Data</strong> (Implemented):</p> <p><strong>Data Generation</strong>:</p> <ul> <li> <strong>Faker library</strong> for realistic synthetic replacements: <ul> <li>Valid SSN format patterns (e.g., 123-45-6789)</li> <li>Contextually appropriate names and addresses</li> <li>Realistic dates maintaining temporal consistency</li> </ul> </li> <li> <strong>Gazetteer sampling</strong> for categorical data (nationalities, religions)</li> </ul> <p><strong>Visual Integration</strong>:</p> <ul> <li> <strong>Pillow library</strong> for text rendering with multiple font types</li> <li> <strong>Augraphy</strong> for document-specific augmentations: <ul> <li>InkMottling for print degradation effects</li> <li>LowInkRandomLines for scanning artifacts</li> </ul> </li> <li> <strong>Albumentations</strong> for rotation and noise augmentation</li> <li> <strong>Font-aware rendering</strong> preserving original document aesthetics</li> </ul> <p><strong>Intelligent Inpainting</strong>:</p> <ul> <li> <strong>OpenCV inpainting</strong> for seamless background reconstruction</li> <li>Telea and Navier-Stokes methods for texture preservation</li> <li>Maintained visual coherence around redacted regions</li> </ul> <h3 id="4-font-detection-module-in-development">4. Font Detection Module (In Development)</h3> <ul> <li>Custom CNN-based <strong>font type classifier</strong> </li> <li>Matches original document font characteristics</li> <li>Ensures <strong>layout consistency</strong>: <ul> <li>Font size matching</li> <li>Character spacing preservation</li> <li>Text alignment maintenance</li> </ul> </li> </ul> <h2 id="key-findings">Key Findings</h2> <h3 id="pii-distribution-analysis">PII Distribution Analysis</h3> <table> <thead> <tr> <th>Dataset</th> <th>Size</th> <th>SSNs</th> <th>Birth Dates</th> <th>Home Addresses</th> <th>Total PII Documents</th> </tr> </thead> <tbody> <tr> <td>RVL-CDIP</td> <td>400,000</td> <td>2,342</td> <td>12,800</td> <td>3,908</td> <td>15,956 (4.0%)</td> </tr> <tr> <td>DocVQA</td> <td>12,767</td> <td>70</td> <td>232</td> <td>276</td> <td>360 (2.8%)</td> </tr> <tr> <td>Tobacco3482</td> <td>3,482</td> <td>9</td> <td>62</td> <td>6</td> <td>66 (1.9%)</td> </tr> <tr> <td>Tobacco800</td> <td>1,290</td> <td>5</td> <td>7</td> <td>1</td> <td>12 (0.9%)</td> </tr> <tr> <td>FUNSD</td> <td>199</td> <td>2</td> <td>0</td> <td>1</td> <td>2 (1.0%)</td> </tr> </tbody> </table> <p><strong>Overall</strong>: 16,396 documents (3.9%) contain sensitive PII</p> <h3 id="detection-performance">Detection Performance</h3> <p><strong>Automated Tool Comparison</strong> (Document-level recall on SSNs):</p> <table> <thead> <tr> <th>Tool</th> <th>Recall</th> <th>Notes</th> </tr> </thead> <tbody> <tr> <td><strong>Presidio</strong></td> <td>0.97</td> <td>Best performance</td> </tr> <tr> <td>Google DLP</td> <td>0.93</td> <td>Strong performance</td> </tr> <tr> <td>Azure</td> <td>0.70</td> <td>Limited context window issues</td> </tr> <tr> <td>Amazon</td> <td>0.77</td> <td>Missing context keywords</td> </tr> </tbody> </table> <p><strong>Limitation</strong>: 7 out of 11 PII types <strong>not supported</strong> by existing tools, necessitating manual annotation.</p> <h3 id="impact-on-model-performance">Impact on Model Performance</h3> <p><strong>Document Similarity</strong> (CLIP ViT-32 embeddings):</p> <ul> <li> <strong>Black redactions</strong>: Significant dissimilarity (mean cosine sim: 0.964)</li> <li> <strong>White redactions</strong>: Moderate dissimilarity (mean cosine sim: 0.989)</li> <li> <strong>Pseudonymization</strong>: Highest similarity (mean cosine sim: 0.997)</li> <li>Synthetic replacement <strong>61.6% more similar</strong> than white redaction</li> </ul> <p><strong>Classification Performance</strong> (DiT-base on RVL-CDIP):</p> <ul> <li> <strong>Zero label flips</strong>: All 445 test documents maintained correct class predictions</li> <li> <strong>Minimal confidence impact</strong>: Mean confidence difference 0.0024 (pseudonymization)</li> <li> <strong>Preserved utility</strong>: &lt;2% accuracy degradation vs. 8-12% for naive redaction</li> </ul> <p><strong>Key Insight</strong>: Pseudonymization with synthetic data <strong>preserves semantic meaning</strong> while removing privacy risks.</p> <h2 id="technical-implementation">Technical Implementation</h2> <p><strong>OCR &amp; Text Extraction</strong>: Amazon Textract<br> <strong>Pattern Matching</strong>: Python regex, Presidio<br> <strong>NER</strong>: spaCy, Hugging Face Transformers<br> <strong>Synthetic Data</strong>: Faker library, custom gazetteers<br> <strong>Image Processing</strong>: OpenCV (inpainting), Pillow (text rendering)<br> <strong>Augmentation</strong>: Augraphy (document-specific), Albumentations<br> <strong>Font Detection</strong>: Custom CNN (PyTorch)<br> <strong>Classification Evaluation</strong>: DiT-base (Microsoft), CLIP ViT-32</p> <h2 id="broader-impact">Broader Impact</h2> <h3 id="privacy-protection">Privacy Protection</h3> <ul> <li> <strong>Removed 2,428 SSNs</strong> from public datasets</li> <li> <strong>Minimized exposure</strong> of 16,000+ documents with sensitive PII</li> <li>Aligned datasets with <strong>NeurIPS and ACL ethics guidelines</strong> </li> </ul> <h3 id="dataset-utility-preservation">Dataset Utility Preservation</h3> <ul> <li>Maintained <strong>document semantics</strong> for ML research</li> <li>Enabled continued use for: <ul> <li>Document classification benchmarking</li> <li>Information extraction tasks</li> <li>Visual question answering</li> <li>Multimodal model training</li> </ul> </li> </ul> <h3 id="research-contribution">Research Contribution</h3> <ul> <li> <strong>First comprehensive audit</strong> of PII in IIT-CDIP-derived datasets</li> <li> <strong>Novel pseudonymization approach</strong> for document images</li> <li> <strong>Public release</strong> of de-identified datasets for research community</li> <li> <strong>Best practices</strong> for large-scale document dataset curation</li> </ul> <h2 id="ethical-considerations">Ethical Considerations</h2> <ul> <li> <strong>Immediate action</strong>: Coordinated with Hugging Face to disable dataset previews</li> <li> <strong>Responsible disclosure</strong>: Contacted dataset hosts before publication</li> <li> <strong>Limited annotator exposure</strong>: Small team with expert oversight to minimize PII spread</li> <li> <strong>Manual verification</strong>: Ensured high-quality detection despite</li> </ul> <p>computational cost</p> <h2 id="future-directions">Future Directions</h2> <ul> <li> <strong>Font style transfer methods</strong> for improved visual fidelity (e.g., GANs, style transfer networks)</li> <li> <strong>Automated font detection</strong> at scale using deep learning</li> <li> <strong>Extension to born-digital documents</strong> (PDFs, Word documents)</li> <li> <strong>Privacy-preserving embeddings</strong> for training without exposing raw data</li> <li> <strong>Differential privacy</strong> integration for formal privacy guarantees</li> </ul> <h2 id="publication">Publication</h2> <p>This work was published at EMNLP 2024 (Main Conference):</p> <p><a class="citation" href="#larson2024deidentification">(Larson et al., 2024)</a></p> </article> <h2>References</h2> <div class="publications"> <h2 class="bibliography">2024</h2> <ol class="bibliography"><li> <div class="row"> <div class="col col-sm-2 abbr"> <abbr class="badge rounded w-100">EMNLP Main</abbr> <figure> <picture> <img src="/assets/img/publication_preview/deidentification.png" class="preview z-depth-1 rounded" width="100%" height="auto" alt="deidentification.png" data-zoomable loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div id="larson2024deidentification" class="col-sm-8"> <div class="title">De-Identification of Sensitive Personal Data in Datasets Derived from IIT-CDIP</div> <div class="author"> Stefan Larson, Nicole Cornehl Lima, Santiago Pedroza Diaz, and <span class="more-authors" title="click to view 9 more authors" onclick=" var element=$(this); element.attr('title', ''); var more_authors_text=element.text() == '9 more authors' ? 'Amogh Manoj Joshi, Siddharth Betala, Jamiu Tunde Suleiman, Yash Mathur, Kaushal Kumar Prajapati, Ramla Alakraa, Junjie Shen, Temi Okotore, Kevin Leach' : '9 more authors'; var cursorPosition=0; var textAdder=setInterval(function(){ element.html(more_authors_text.substring(0, cursorPosition + 1)); if (++cursorPosition == more_authors_text.length){ clearInterval(textAdder); } }, '10'); ">9 more authors</span> </div> <div class="periodical"> <em>In Proceedings of the 2024 Conference on Empirical Methods in Natural Language Processing (EMNLP)</em>, 2024 </div> <div class="periodical"> </div> <div class="links"> <a class="bibtex btn btn-sm z-depth-0" role="button">Bib</a> <a href="https://aclanthology.org/2024.emnlp-main.1198/" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">HTML</a> <a href="https://aclanthology.org/2024.emnlp-main.1198.pdf" class="btn btn-sm z-depth-0" role="button" rel="external nofollow noopener" target="_blank">PDF</a> </div> <div class="badges"> <span class="__dimensions_badge_embed__" data-pmid="" data-style="small_rectangle" data-legend="hover-right" style="margin-bottom: 3px;"></span> </div> <div class="bibtex hidden"> <figure class="highlight"><pre><code class="language-bibtex" data-lang="bibtex"><span class="nc">@inproceedings</span><span class="p">{</span><span class="nl">larson2024deidentification</span><span class="p">,</span>
  <span class="na">title</span> <span class="p">=</span> <span class="s">{De-Identification of Sensitive Personal Data in Datasets Derived from IIT-CDIP}</span><span class="p">,</span>
  <span class="na">author</span> <span class="p">=</span> <span class="s">{Larson, Stefan and Lima, Nicole Cornehl and Diaz, Santiago Pedroza and Joshi, Amogh Manoj and Betala, Siddharth and Suleiman, Jamiu Tunde and Mathur, Yash and Prajapati, Kaushal Kumar and Alakraa, Ramla and Shen, Junjie and Okotore, Temi and Leach, Kevin}</span><span class="p">,</span>
  <span class="na">booktitle</span> <span class="p">=</span> <span class="s">{Proceedings of the 2024 Conference on Empirical Methods in Natural Language Processing (EMNLP)}</span><span class="p">,</span>
  <span class="na">year</span> <span class="p">=</span> <span class="s">{2024}</span><span class="p">,</span>
  <span class="na">url</span> <span class="p">=</span> <span class="s">{https://aclanthology.org/2024.emnlp-main.1198/}</span><span class="p">,</span>
  <span class="na">dimensions</span> <span class="p">=</span> <span class="s">{true}</span><span class="p">,</span>
<span class="p">}</span></code></pre></figure> </div> </div> </div> </li></ol> </div> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Siddharth Betala. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>